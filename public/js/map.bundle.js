webpackJsonp([8],{33:function(e,n,a){"use strict";function i(){u.a.get("/map/needs").then(function(e){g=e.data.isLoggedIn,s(e.data)})["catch"](function(e){})}function s(e){p=new google.maps.Map(document.getElementById("map"),{zoom:12,center:m,scrollwheel:!1}),l(),_.forEach(e.needs,function(e,n){var a="markers/brown_MarkerW.png";if(null!=e.lat&&null!=e.lng){a=e.is_complete?"markers/green_MarkerC.png":e.is_pending?"markers/orange_MarkerP.png":e.needs_met?"markers/blue_MarkerM.png":"markers/brown_MarkerW.png";var i={lat:parseFloat(e.lat),lng:parseFloat(e.lng)},s=new google.maps.InfoWindow({content:o(e)}),t=new google.maps.Marker({position:i,map:p,title:"Case# "+e.id,infoWindow:s,icon:a});google.maps.event.addListener(t,"click",function(){this.infoWindow.open(p,this)})}})}function t(e,n,a,i){var s='<div id="content">';return s+=e.is_complete?'<div id="siteNotice"><span class="label label-success">Complete</span></div>':e.is_pending?'<div id="siteNotice"><span class="label label-warning">Pending</span></div>':e.needs_met?'<div id="siteNotice"><span class="label label-info">Needs Met</span></div>':'<div id="siteNotice"><span class="label label-default">Waiting</span></div>',s+=g?'<h1 class="heading" class="firstHeading"><a href="/needs/'+e.id+'">Case# '+e.id+'</a></h1>\n                <div id="bodyContent">':'<h1 class="heading" class="firstHeading">Case# '+e.id+'</h1>\n                    <div id="bodyContent">',(e.first_name||e.last_name)&&(s+="<p>Name: <strong>"+e.first_name+" "+e.last_name+"</strong></p>"),s+="<p>Address: <strong>"+n+", "+a+"</strong></p>",e.phone&&(s+="<p>Phone: "+e.phone+"</p>"),""!=i&&(s+=i),s+="</div>\n            </div>"}function o(e){var n=e.address?e.address:"",a=e.zip?e.zip:"",i="";return e.physical_needs.length>0&&_.forEach(e.physical_needs,function(n,a){i+='<div class="checkbox">\n                          <label><input type="checkbox" class="physical_needs" \n                            data-need_id="'+e.id+'"\n                            data-physical_needs_id="'+n.id+'"\n                            value="">'+_.capitalize(n.name)+"</label>\n                        </div>"}),t(e,n,a,i)}function d(){$("body").on("change",".physical_needs",function(){var e=$(this).data("need_id"),n=$(this).data("physical_needs_id"),a=$(this).prop("checked");u.a.post("/needs/"+e,{need_met:!0,physical_need_id:n,need_complete:a}).then(function(e){toastr.success("The job has been updated")})["catch"](function(e){})})}function l(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var n=e.coords.latitude,a=e.coords.longitude;c(n,a)})}function c(e,n){new google.maps.Marker({position:{lat:e,lng:n},map:p,title:"You are here!",icon:"markers/red_MarkerM.png"})}function r(){i(),d()}var p,g,h=a(0),u=a.n(h),m=($("#map"),{lat:31.5744842,lng:-84.1287211});r()}},[33]);