{"version":3,"sources":["webpack:///./resources/assets/js/map.js"],"names":["let"],"mappings":"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","file":"map.bundle.js","sourcesContent":["import axios from \"axios\";\n\nlet locations,\n    map = $('#map'),\n    physicalNeeds = $('.physical_needs');\n\nfunction getNeeds() {\n    axios.get('/map/needs')\n        .then(response => {\n            // console.log(response);\n            initMap(response.data);\n        })\n        .catch(error => {\n\n        })\n}\n\nfunction initMap(locations) {\n    let albany = {lat: 31.5744842, lng: -84.1287211};\n\n    let map = new google.maps.Map(document.getElementById('map'), {\n        zoom: 12,\n        center: albany,\n        scrollwheel: false\n    });\n\n    _.forEach(locations, (value, key) => {\n        console.log(value);\n        let customMarker = 'markers/brown_MarkerW.png';\n        if (value.lat == null || value.lng == null) {\n            return;\n        }\n\n        if (value.is_complete) {\n            customMarker = 'markers/green_MarkerC.png';\n        } else if (value.is_pending) {\n            customMarker = 'markers/orange_MarkerP.png';\n        } else if (value.needs_met) {\n            customMarker = 'markers/blue_MarkerM.png';\n        } else {\n            customMarker = 'markers/brown_MarkerW.png';\n        }\n\n        let coordinates = {\n            lat: parseFloat(value.lat),\n            lng: parseFloat(value.lng)\n        };\n\n        let popup = new google.maps.InfoWindow({\n            content: contentString(value)\n        });\n\n        let marker = new google.maps.Marker({\n            position: coordinates,\n            map: map,\n            title: `Case# ${value.id}`,\n            infoWindow: popup,\n            icon: customMarker\n        });\n\n        google.maps.event.addListener(marker, 'click', function () {\n            this.infoWindow.open(map, this);\n        });\n    });\n\n}\n\nfunction contentString(content) {\n    let address = content.address ? content.address : '';\n    let zip = content.zip ? content.zip : '';\n    let needs = '';\n    if (content.physical_needs.length > 0) {\n        _.forEach(content.physical_needs, function (value, key) {\n            needs += `<div class=\"checkbox\">\n                          <label><input type=\"checkbox\" class=\"physical_needs\" \n                            data-need_id=\"${content.id}\"\n                            data-physical_needs_id=\"${value.id}\"\n                            value=\"\">${_.capitalize(value.name)}</label>\n                        </div>`;\n        });\n    }\n    let output = `<div id=\"content\">`;\n    if (content.is_complete) {\n        output += `<div id=\"siteNotice\"><span class=\"label label-success\">Complete</span></div>`;\n    } else if (content.is_pending) {\n        output += `<div id=\"siteNotice\"><span class=\"label label-warning\">Pending</span></div>`;\n    } else if (content.needs_met) {\n        output += `<div id=\"siteNotice\"><span class=\"label label-info\">Needs Met</span></div>`;\n    } else {\n        output += `<div id=\"siteNotice\"><span class=\"label label-default\">Waiting</span></div>`;\n    }\n\n    output += `<h1 class=\"heading\" class=\"firstHeading\">Case# ${content.id}</h1>\n                <div id=\"bodyContent\">`;\n    if (content.first_name || content.last_name) {\n        output += `<p>Name: <strong>${content.first_name} ${content.last_name}</strong></p>`\n    }\n    output += `<p>Address: <strong>${address}, ${zip}</strong></p>`;\n    if (content.phone) {\n        output += `<p>Phone: ${content.phone}</p>`;\n    }\n    if (needs != '') {\n        output += needs;\n    }\n    output += `</div>\n            </div>`;\n\n    return output;\n}\n\nfunction markPhysicalNeedComplete() {\n    $('body').on('change', '.physical_needs', function () {\n        let needId = $(this).data('need_id'),\n            physicalNeedId = $(this).data('physical_needs_id'),\n            isChecked = $(this).prop('checked');\n        axios.post(`/needs/${needId}`, {\n            need_met: true,\n            physical_need_id: physicalNeedId,\n            need_complete: isChecked\n        })\n            .then(response => {\n                console.log(response);\n                toastr.success('The job has been marked complete.')\n            })\n            .catch(error => {\n                console.log(error);\n            })\n    });\n}\n\ngetNeeds();\nmarkPhysicalNeedComplete();\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/map.js"],"sourceRoot":""}