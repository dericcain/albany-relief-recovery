{"version":3,"sources":["webpack:///./resources/assets/js/map.js"],"names":["let"],"mappings":"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","file":"map.bundle.js","sourcesContent":["import axios from \"axios\";\n\nlet map = $('#map'),\n    printButton = $('#print-button'),\n    albany = {lat: 31.5744842, lng: -84.1287211},\n    googleMap,\n    isLoggedIn;\n\nfunction getNeeds() {\n    axios.get('/map/needs')\n        .then(response => {\n            isLoggedIn = response.data.isLoggedIn;\n            initMap(response.data);\n        })\n        .catch(error => {\n\n        })\n}\n\n\nfunction initMap(locations) {\n    googleMap = new google.maps.Map(document.getElementById('map'), {\n        zoom: 12,\n        center: albany,\n        scrollwheel: false\n    });\n\n    getUsersLocation();\n\n    _.forEach(locations.needs, (value, key) => {\n        let customMarker = 'markers/red_MarkerW.png';\n        if (value.lat == null || value.lng == null) {\n            return;\n        }\n\n        if (value.is_complete) {\n            customMarker = 'markers/green_MarkerC.png';\n        } else if (value.is_pending) {\n            customMarker = 'markers/yellow_MarkerP.png';\n        } else if (value.needs_met) {\n            customMarker = 'markers/orange_MarkerM.png';\n        } else {\n            customMarker = 'markers/red_MarkerW.png';\n        }\n\n        let coordinates = {\n            lat: parseFloat(value.lat),\n            lng: parseFloat(value.lng)\n        };\n\n        let popup = new google.maps.InfoWindow({\n            content: contentString(value)\n        });\n\n        let marker = new google.maps.Marker({\n            position: coordinates,\n            map: googleMap,\n            title: `Case# ${value.id}`,\n            infoWindow: popup,\n            icon: customMarker\n        });\n\n        google.maps.event.addListener(marker, 'click', function () {\n            this.infoWindow.open(googleMap, this);\n        });\n    });\n\n}\n\nfunction buildInfoWindow(content, address, zip, needs) {\n    let output = `<div id=\"content\">`;\n    if (content.is_complete) {\n        output += `<div id=\"siteNotice\"><span class=\"label label-success\">Complete</span></div>`;\n    } else if (content.is_pending) {\n        output += `<div id=\"siteNotice\">\n                        <span class=\"label label-warning\">Pending</span>\n                        <span class=\"pull-right\">\n                            <label>Print\n                                <input type=\"checkbox\" \n                                    name=\"needs[]\"\n                                    class=\"print\" \n                                    data-need_id=\"${content.id}\"\n                                    value=\"${content.id}\">\n                            </label>\n                        </span>\n                    </div>`;\n    } else if (content.needs_met) {\n        output += `<div id=\"siteNotice\"><span class=\"label label-info\">Needs Met</span>\n                        <span class=\"pull-right\">\n                            <label>Print\n                                <input type=\"checkbox\" \n                                    name=\"needs[]\"\n                                    class=\"print\" \n                                    data-need_id=\"${content.id}\"\n                                    value=\"${content.id}\">\n                                </label>\n                        </span>\n                    </div>`;\n    } else {\n        output += `<div id=\"siteNotice\"><span class=\"label label-default\">Waiting</span>\n                        <span class=\"pull-right\">\n                            <label>Print\n                                <input type=\"checkbox\" \n                                    name=\"needs[]\"\n                                    class=\"print\" \n                                    data-need_id=\"${content.id}\"\n                                    value=\"${content.id}\">\n                            </label>\n                        </span>\n                    </div>`;\n    }\n\n    if (isLoggedIn) {\n        output += `<h1 class=\"heading\" class=\"firstHeading\"><a href=\"/needs/${content.id}\">Case# ${content.id}</a></h1>\n                <div id=\"bodyContent\">`;\n    } else {\n        output += `<h1 class=\"heading\" class=\"firstHeading\">Case# ${content.id}</h1>\n                    <div id=\"bodyContent\">`;\n    }\n    if (content.first_name || content.last_name) {\n        output += `<p>Name: <strong>${content.first_name} ${content.last_name}</strong></p>`\n    }\n    output += `<p>Address: <strong>${address}, ${zip}</strong></p>`;\n    if (content.phone) {\n        output += `<p>Phone: ${content.phone}</p>`;\n    }\n    if (needs != '') {\n        output += needs;\n    }\n    output += `</div>\n            </div>`;\n\n    return output;\n}\n\nfunction contentString(content) {\n    let address = content.address ? content.address : '';\n    let zip = content.zip ? content.zip : '';\n    let needs = '';\n    if (content.physical_needs.length > 0) {\n        _.forEach(content.physical_needs, function (value, key) {\n            needs += `<div class=\"checkbox\">\n                          <label><input type=\"checkbox\" class=\"physical_needs\" \n                            data-need_id=\"${content.id}\"\n                            data-physical_needs_id=\"${value.id}\"\n                            value=\"\">${_.capitalize(value.name)}</label>\n                        </div>`;\n        });\n    }\n    return buildInfoWindow(content, address, zip, needs);\n}\n\nfunction markPhysicalNeedComplete() {\n    $('body').on('change', '.physical_needs', function () {\n        let needId = $(this).data('need_id'),\n            physicalNeedId = $(this).data('physical_needs_id'),\n            isChecked = $(this).prop('checked');\n        axios.post(`/needs/${needId}`, {\n            need_met: true,\n            physical_need_id: physicalNeedId,\n            need_complete: isChecked\n        })\n            .then(response => {\n                toastr.success('The job has been updated')\n            })\n            .catch(error => {\n                console.log(error);\n            })\n    });\n}\n\nfunction getUsersLocation() {\n    if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition((position) => {\n            let lat = position.coords.latitude;\n            let lng = position.coords.longitude;\n            addUsersMarkerToMap(lat, lng)\n        });\n    }\n}\n\nfunction addUsersMarkerToMap(lat, lng) {\n    new google.maps.Marker({\n        position: {lat: lat, lng: lng},\n        map: googleMap,\n        title: `You are here!`,\n        icon: 'markers/blue_MarkerM.png'\n    });\n}\n\nfunction showPrintButton() {\n    $('body').on('change', '.print', () => {\n        let checkbox = $('.print:checkbox:checked');\n        if (checkbox.length >= 1 && printButton.not(':visible')) {\n            printButton.fadeIn();\n        } else if (checkbox.length < 1 && printButton.is(':visible')) {\n            printButton.fadeOut();\n        }\n    })\n}\n\nfunction init() {\n    getNeeds();\n    markPhysicalNeedComplete();\n    showPrintButton();\n}\n\ninit();\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/map.js"],"sourceRoot":""}